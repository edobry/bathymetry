<!DOCTYPE HTML>
<html>
    <head>
        <title>transects</title>

        <link href="../node_modules/c3/c3.css" rel="stylesheet">
        <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>
        <script src="https://d3js.org/d3.v3.min.js"></script>
        <script src="../node_modules/c3/c3.js"></script>
        <style type="text/css">
            .c3-target-floor .c3-areas-floor path {
                opacity: 1 !important;
                fill: rgb(126, 125, 106) !important;
            }

            .c3-target-floor .c3-circles-floor circle {
                fill: rgb(196, 195, 166) !important;
            }

            .c3-target-floor .c3-lines-floor path {
                stroke: rgb(196, 195, 166) !important;
            }
        </style>
    </head>
    <body>
        <div id="chart"></div>

        <script type="text/javascript">
            const bands = { '6':
   { '0': 38,
     '11.03': 0,
     '1.75': 32,
     '0.00': 38,
     '0.18': 37,
     '0.35': 37,
     '0.53': 36,
     '0.70': 36,
     '0.88': 35,
     '1.05': 34,
     '1.23': 34,
     '1.41': 33,
     '1.58': 33,
     '1.76': 32,
     '1.93': 31,
     '2.11': 31,
     '2.28': 30,
     '2.46': 30,
     '2.64': 29,
     '2.81': 28,
     '2.99': 28,
     '3.16': 27,
     '3.34': 27,
     '3.51': 26,
     '3.69': 25,
     '3.87': 25,
     '4.04': 24,
     '4.22': 23,
     '4.39': 23,
     '4.57': 22,
     '4.74': 22,
     '4.92': 21,
     '5.10': 20,
     '5.27': 20,
     '5.45': 19,
     '5.62': 19,
     '5.80': 18,
     '5.97': 17,
     '6.15': 17,
     '6.33': 16,
     '6.50': 16,
     '6.68': 15,
     '6.85': 14,
     '7.03': 14,
     '7.20': 13,
     '7.38': 13,
     '7.56': 12,
     '7.73': 11,
     '7.91': 11,
     '8.08': 10,
     '8.26': 10,
     '8.44': 9,
     '8.61': 8,
     '8.79': 8,
     '8.96': 7,
     '9.14': 7,
     '9.31': 6,
     '9.49': 5,
     '9.67': 5,
     '9.84': 4,
     '10.02': 3,
     '10.19': 3,
     '10.37': 2,
     '10.54': 2,
     '10.72': 1,
     '10.90': 0,
     '11.07': 0 },
  '8':
   { '0': 97,
     '11.03': 97,
     '1.75': 97,
     '0.00': 97,
     '0.18': 97,
     '0.35': 97,
     '0.53': 97,
     '0.70': 97,
     '0.88': 97,
     '1.05': 97,
     '1.23': 97,
     '1.41': 97,
     '1.58': 97,
     '1.76': 97,
     '1.93': 97,
     '2.11': 97,
     '2.28': 97,
     '2.46': 97,
     '2.64': 97,
     '2.81': 97,
     '2.99': 97,
     '3.16': 97,
     '3.34': 97,
     '3.51': 97,
     '3.69': 97,
     '3.87': 97,
     '4.04': 97,
     '4.22': 97,
     '4.39': 97,
     '4.57': 97,
     '4.74': 97,
     '4.92': 97,
     '5.10': 97,
     '5.27': 97,
     '5.45': 97,
     '5.62': 97,
     '5.80': 97,
     '5.97': 97,
     '6.15': 97,
     '6.33': 97,
     '6.50': 97,
     '6.68': 97,
     '6.85': 97,
     '7.03': 97,
     '7.20': 97,
     '7.38': 97,
     '7.56': 97,
     '7.73': 97,
     '7.91': 97,
     '8.08': 97,
     '8.26': 97,
     '8.44': 97,
     '8.61': 97,
     '8.79': 97,
     '8.96': 97,
     '9.14': 97,
     '9.31': 97,
     '9.49': 97,
     '9.67': 97,
     '9.84': 97,
     '10.02': 97,
     '10.19': 97,
     '10.37': 97,
     '10.54': 97,
     '10.72': 97,
     '10.90': 97,
     '11.07': 97 },
  '10':
   { '0': 156,
     '11.03': 156,
     '1.75': 156,
     '0.00': 156,
     '0.18': 156,
     '0.35': 156,
     '0.53': 156,
     '0.70': 156,
     '0.88': 156,
     '1.05': 156,
     '1.23': 156,
     '1.41': 156,
     '1.58': 156,
     '1.76': 156,
     '1.93': 156,
     '2.11': 156,
     '2.28': 156,
     '2.46': 156,
     '2.64': 156,
     '2.81': 156,
     '2.99': 156,
     '3.16': 156,
     '3.34': 156,
     '3.51': 156,
     '3.69': 156,
     '3.87': 156,
     '4.04': 156,
     '4.22': 156,
     '4.39': 156,
     '4.57': 156,
     '4.74': 156,
     '4.92': 156,
     '5.10': 156,
     '5.27': 156,
     '5.45': 156,
     '5.62': 156,
     '5.80': 156,
     '5.97': 156,
     '6.15': 156,
     '6.33': 156,
     '6.50': 156,
     '6.68': 156,
     '6.85': 156,
     '7.03': 156,
     '7.20': 156,
     '7.38': 156,
     '7.56': 156,
     '7.73': 156,
     '7.91': 156,
     '8.08': 156,
     '8.26': 156,
     '8.44': 156,
     '8.61': 156,
     '8.79': 156,
     '8.96': 156,
     '9.14': 156,
     '9.31': 156,
     '9.49': 156,
     '9.67': 156,
     '9.84': 156,
     '10.02': 156,
     '10.19': 156,
     '10.37': 156,
     '10.54': 156,
     '10.72': 156,
     '10.90': 156,
     '11.07': 156 },
  '12':
   { '0': 37,
     '11.03': 37,
     '1.75': 37,
     '0.00': 37,
     '0.18': 37,
     '0.35': 37,
     '0.53': 37,
     '0.70': 37,
     '0.88': 37,
     '1.05': 37,
     '1.23': 37,
     '1.41': 37,
     '1.58': 37,
     '1.76': 37,
     '1.93': 37,
     '2.11': 37,
     '2.28': 37,
     '2.46': 37,
     '2.64': 37,
     '2.81': 37,
     '2.99': 37,
     '3.16': 37,
     '3.34': 37,
     '3.51': 37,
     '3.69': 37,
     '3.87': 37,
     '4.04': 37,
     '4.22': 37,
     '4.39': 37,
     '4.57': 37,
     '4.74': 37,
     '4.92': 37,
     '5.10': 37,
     '5.27': 37,
     '5.45': 37,
     '5.62': 37,
     '5.80': 37,
     '5.97': 37,
     '6.15': 37,
     '6.33': 37,
     '6.50': 37,
     '6.68': 37,
     '6.85': 37,
     '7.03': 37,
     '7.20': 37,
     '7.38': 37,
     '7.56': 37,
     '7.73': 37,
     '7.91': 37,
     '8.08': 37,
     '8.26': 37,
     '8.44': 37,
     '8.61': 37,
     '8.79': 37,
     '8.96': 37,
     '9.14': 37,
     '9.31': 37,
     '9.49': 37,
     '9.67': 37,
     '9.84': 37,
     '10.02': 37,
     '10.19': 37,
     '10.37': 37,
     '10.54': 37,
     '10.72': 37,
     '10.90': 37,
     '11.07': 37 },
  '14':
   { '0': 103,
     '11.03': 103,
     '1.75': 103,
     '0.00': 103,
     '0.18': 103,
     '0.35': 103,
     '0.53': 103,
     '0.70': 103,
     '0.88': 103,
     '1.05': 103,
     '1.23': 103,
     '1.41': 103,
     '1.58': 103,
     '1.76': 103,
     '1.93': 103,
     '2.11': 103,
     '2.28': 103,
     '2.46': 103,
     '2.64': 103,
     '2.81': 103,
     '2.99': 103,
     '3.16': 103,
     '3.34': 103,
     '3.51': 103,
     '3.69': 103,
     '3.87': 103,
     '4.04': 103,
     '4.22': 103,
     '4.39': 103,
     '4.57': 103,
     '4.74': 103,
     '4.92': 103,
     '5.10': 103,
     '5.27': 103,
     '5.45': 103,
     '5.62': 103,
     '5.80': 103,
     '5.97': 103,
     '6.15': 103,
     '6.33': 103,
     '6.50': 103,
     '6.68': 103,
     '6.85': 103,
     '7.03': 103,
     '7.20': 103,
     '7.38': 103,
     '7.56': 103,
     '7.73': 103,
     '7.91': 103,
     '8.08': 103,
     '8.26': 103,
     '8.44': 103,
     '8.61': 103,
     '8.79': 103,
     '8.96': 103,
     '9.14': 103,
     '9.31': 103,
     '9.49': 103,
     '9.67': 103,
     '9.84': 103,
     '10.02': 103,
     '10.19': 103,
     '10.37': 103,
     '10.54': 103,
     '10.72': 103,
     '10.90': 103,
     '11.07': 103 },
  '16':
   { '0': 76,
     '1.75': 76,
     '11.03': 76,
     '0.00': 76,
     '0.18': 76,
     '0.35': 76,
     '0.53': 76,
     '0.70': 76,
     '0.88': 76,
     '1.05': 76,
     '1.23': 76,
     '1.41': 76,
     '1.58': 76,
     '1.76': 76,
     '1.93': 76,
     '2.11': 76,
     '2.28': 76,
     '2.46': 76,
     '2.64': 76,
     '2.81': 76,
     '2.99': 76,
     '3.16': 76,
     '3.34': 76,
     '3.51': 76,
     '3.69': 76,
     '3.87': 76,
     '4.04': 76,
     '4.22': 76,
     '4.39': 76,
     '4.57': 76,
     '4.74': 76,
     '4.92': 76,
     '5.10': 76,
     '5.27': 76,
     '5.45': 76,
     '5.62': 76,
     '5.80': 76,
     '5.97': 76,
     '6.15': 76,
     '6.33': 76,
     '6.50': 76,
     '6.68': 76,
     '6.85': 76,
     '7.03': 76,
     '7.20': 76,
     '7.38': 76,
     '7.56': 76,
     '7.73': 76,
     '7.91': 76,
     '8.08': 76,
     '8.26': 76,
     '8.44': 76,
     '8.61': 76,
     '8.79': 76,
     '8.96': 76,
     '9.14': 76,
     '9.31': 76,
     '9.49': 76,
     '9.67': 76,
     '9.84': 76,
     '10.02': 76,
     '10.19': 76,
     '10.37': 76,
     '10.54': 76,
     '10.72': 76,
     '10.90': 76,
     '11.07': 76 },
  '18':
   { '0': 35,
     '1.75': 39,
     '11.03': 60,
     '0.00': 35,
     '0.18': 35,
     '0.35': 36,
     '0.53': 36,
     '0.70': 37,
     '0.88': 37,
     '1.05': 37,
     '1.23': 38,
     '1.41': 38,
     '1.58': 39,
     '1.76': 39,
     '1.93': 39,
     '2.11': 40,
     '2.28': 40,
     '2.46': 41,
     '2.64': 41,
     '2.81': 41,
     '2.99': 42,
     '3.16': 42,
     '3.34': 43,
     '3.51': 43,
     '3.69': 43,
     '3.87': 44,
     '4.04': 44,
     '4.22': 45,
     '4.39': 45,
     '4.57': 45,
     '4.74': 46,
     '4.92': 46,
     '5.10': 47,
     '5.27': 47,
     '5.45': 47,
     '5.62': 48,
     '5.80': 48,
     '5.97': 49,
     '6.15': 49,
     '6.33': 49,
     '6.50': 50,
     '6.68': 50,
     '6.85': 51,
     '7.03': 51,
     '7.20': 51,
     '7.38': 52,
     '7.56': 52,
     '7.73': 53,
     '7.91': 53,
     '8.08': 53,
     '8.26': 54,
     '8.44': 54,
     '8.61': 55,
     '8.79': 55,
     '8.96': 55,
     '9.14': 56,
     '9.31': 56,
     '9.49': 57,
     '9.67': 57,
     '9.84': 57,
     '10.02': 58,
     '10.19': 58,
     '10.37': 59,
     '10.54': 59,
     '10.72': 59,
     '10.90': 60,
     '11.07': 60 },
  '20':
   { '0': 75,
     '1.75': 71,
     '11.03': 49,
     '0.00': 75,
     '0.18': 75,
     '0.35': 74,
     '0.53': 74,
     '0.70': 73,
     '0.88': 73,
     '1.05': 73,
     '1.23': 72,
     '1.41': 72,
     '1.58': 71,
     '1.76': 71,
     '1.93': 71,
     '2.11': 70,
     '2.28': 70,
     '2.46': 69,
     '2.64': 69,
     '2.81': 68,
     '2.99': 68,
     '3.16': 68,
     '3.34': 67,
     '3.51': 67,
     '3.69': 66,
     '3.87': 66,
     '4.04': 66,
     '4.22': 65,
     '4.39': 65,
     '4.57': 64,
     '4.74': 64,
     '4.92': 63,
     '5.10': 63,
     '5.27': 63,
     '5.45': 62,
     '5.62': 62,
     '5.80': 61,
     '5.97': 61,
     '6.15': 61,
     '6.33': 60,
     '6.50': 60,
     '6.68': 59,
     '6.85': 59,
     '7.03': 58,
     '7.20': 58,
     '7.38': 58,
     '7.56': 57,
     '7.73': 57,
     '7.91': 56,
     '8.08': 56,
     '8.26': 56,
     '8.44': 55,
     '8.61': 55,
     '8.79': 54,
     '8.96': 54,
     '9.14': 53,
     '9.31': 53,
     '9.49': 53,
     '9.67': 52,
     '9.84': 52,
     '10.02': 51,
     '10.19': 51,
     '10.37': 51,
     '10.54': 50,
     '10.72': 50,
     '10.90': 49,
     '11.07': 49 },
  '22':
   { '0': 33,
     '1.75': 35,
     '11.03': 48,
     '0.00': 33,
     '0.18': 33,
     '0.35': 33,
     '0.53': 34,
     '0.70': 34,
     '0.88': 34,
     '1.05': 34,
     '1.23': 34,
     '1.41': 35,
     '1.58': 35,
     '1.76': 35,
     '1.93': 35,
     '2.11': 36,
     '2.28': 36,
     '2.46': 36,
     '2.64': 36,
     '2.81': 36,
     '2.99': 37,
     '3.16': 37,
     '3.34': 37,
     '3.51': 37,
     '3.69': 38,
     '3.87': 38,
     '4.04': 38,
     '4.22': 38,
     '4.39': 39,
     '4.57': 39,
     '4.74': 39,
     '4.92': 39,
     '5.10': 40,
     '5.27': 40,
     '5.45': 40,
     '5.62': 40,
     '5.80': 41,
     '5.97': 41,
     '6.15': 41,
     '6.33': 41,
     '6.50': 42,
     '6.68': 42,
     '6.85': 42,
     '7.03': 42,
     '7.20': 43,
     '7.38': 43,
     '7.56': 43,
     '7.73': 43,
     '7.91': 44,
     '8.08': 44,
     '8.26': 44,
     '8.44': 44,
     '8.61': 45,
     '8.79': 45,
     '8.96': 45,
     '9.14': 45,
     '9.31': 46,
     '9.49': 46,
     '9.67': 46,
     '9.84': 46,
     '10.02': 47,
     '10.19': 47,
     '10.37': 47,
     '10.54': 47,
     '10.72': 48,
     '10.90': 48,
     '11.07': 48 },
  '24':
   { '0': 59,
     '1.75': 55,
     '11.03': 33,
     '0.00': 59,
     '0.18': 59,
     '0.35': 58,
     '0.53': 58,
     '0.70': 57,
     '0.88': 57,
     '1.05': 57,
     '1.23': 56,
     '1.41': 56,
     '1.58': 55,
     '1.76': 55,
     '1.93': 55,
     '2.11': 54,
     '2.28': 54,
     '2.46': 53,
     '2.64': 53,
     '2.81': 52,
     '2.99': 52,
     '3.16': 52,
     '3.34': 51,
     '3.51': 51,
     '3.69': 50,
     '3.87': 50,
     '4.04': 50,
     '4.22': 49,
     '4.39': 49,
     '4.57': 48,
     '4.74': 48,
     '4.92': 47,
     '5.10': 47,
     '5.27': 47,
     '5.45': 46,
     '5.62': 46,
     '5.80': 45,
     '5.97': 45,
     '6.15': 45,
     '6.33': 44,
     '6.50': 44,
     '6.68': 43,
     '6.85': 43,
     '7.03': 42,
     '7.20': 42,
     '7.38': 42,
     '7.56': 41,
     '7.73': 41,
     '7.91': 40,
     '8.08': 40,
     '8.26': 40,
     '8.44': 39,
     '8.61': 39,
     '8.79': 38,
     '8.96': 38,
     '9.14': 37,
     '9.31': 37,
     '9.49': 37,
     '9.67': 36,
     '9.84': 36,
     '10.02': 35,
     '10.19': 35,
     '10.37': 35,
     '10.54': 34,
     '10.72': 34,
     '10.90': 33,
     '11.07': 33 },
  '26':
   { '0': 82,
     '1.75': 90,
     '11.03': 42,
     '0.00': 82,
     '0.18': 83,
     '0.35': 84,
     '0.53': 84,
     '0.70': 85,
     '0.88': 86,
     '1.05': 87,
     '1.23': 88,
     '1.41': 88,
     '1.58': 89,
     '1.76': 90,
     '1.93': 89,
     '2.11': 88,
     '2.28': 87,
     '2.46': 86,
     '2.64': 85,
     '2.81': 85,
     '2.99': 84,
     '3.16': 83,
     '3.34': 82,
     '3.51': 81,
     '3.69': 80,
     '3.87': 79,
     '4.04': 78,
     '4.22': 77,
     '4.39': 76,
     '4.57': 75,
     '4.74': 75,
     '4.92': 74,
     '5.10': 73,
     '5.27': 72,
     '5.45': 71,
     '5.62': 70,
     '5.80': 69,
     '5.97': 68,
     '6.15': 67,
     '6.33': 66,
     '6.50': 65,
     '6.68': 65,
     '6.85': 64,
     '7.03': 63,
     '7.20': 62,
     '7.38': 61,
     '7.56': 60,
     '7.73': 59,
     '7.91': 58,
     '8.08': 57,
     '8.26': 56,
     '8.44': 55,
     '8.61': 55,
     '8.79': 54,
     '8.96': 53,
     '9.14': 52,
     '9.31': 51,
     '9.49': 50,
     '9.67': 49,
     '9.84': 48,
     '10.02': 47,
     '10.19': 46,
     '10.37': 45,
     '10.54': 45,
     '10.72': 44,
     '10.90': 43,
     '11.07': 42 } }


            const byField = field => (a, b) =>
                a[field] - b[field];

            const bandRows = Object.entries(bands)
                .map(([name, points]) => [
                    name, ...Object.entries(points)
                        .sort(byField(0))
                        .map(([dist, depth]) =>
                            depth)
                ]);

            console.log(bandRows);

            const bandNames = bandRows.map(([name]) => name);

            console.log(bandNames);

            const floor = {
                0.00: 24,
                0.18: 23,
                0.35: 21,
                0.53: 24,
                0.70: 41,
                0.88: 75,
                1.05: 109,
                1.23: 83,
                1.41: 163,
                1.58: 293,
                1.75: 341,
                1.76: 343,
                1.93: 395,
                2.11: 462,
                2.28: 505,
                2.46: 545,
                2.64: 598,
                2.81: 631,
                2.99: 662,
                3.16: 715,
                3.34: 751,
                3.51: 784
            };

            const floorVals = Object.values(floor).map(x => 800-x);

            const entriesToMap = (map, [key, value]) => {
                map[key] = value;
                return map;
            };

            const xVals = Object.keys(floor).map(parseFloat);

            const config = {
                bindto: "#chart",
                size: {
                    height: 500
                },
                data: {
                    x: "x",
                    columns: [
                        ["x", ...xVals],
                        ["surface", ...xVals.map(x => 800)],
                        ...bandRows,
                        ["floor", ...floorVals]
                    ],
                    order: false,
                    // order: (a, b) => {
                    //     console.log(a,b);
                    //     return parseInt(a.id) - parseInt(b.id);
                    // },
                    // "line", "spline", "step", "area", "area-step" are also available to stack
                    types: [
                        ["floor", "area"],
                        ...bandNames.map(name => [name, "area"])
                    ].reduce(entriesToMap, {}),
                    groups: [[...bandNames]],
                    // color: (color, d) => {
                    //     console.log(color, d);
                    //     console.log(`#${Math.floor(parseInt(d.id) / 26)*10}FFFF`);
                    //     return d == "id" || d.id == "floor"
                    //         ? color
                    //         : `#${Math.floor(parseInt(d.id) / 26)*10}FFFF`
                    // }


                },
                // area: {
                //     zerobased: false
                // },
                axis: {
                    y: {
                        // inverted: true
                        tick: {
                            format: d =>
                                parseInt(d)-800
                        }

                    }
                }
            };

            console.log(config);

            var chart = c3.generate(config);

            // $(".c3-target-floor path").css({
            //     opacity: 1,
            //     fill: "#7e7d6a"
            // });
            //
            // $(".c3-circles-floor circle").css({
            //     fill: "#c4c3a6"
            // });
            // $(".c3-lines-floor path").css({
            //     stroke: "#c4c3a6"
            // });
        </script>
    </body>
</html>
